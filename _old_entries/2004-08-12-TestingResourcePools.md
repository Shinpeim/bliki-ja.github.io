---
title: テスティングリソースプール
tags: [testing]
---

古いノートをガサゴソ漁っていたら、
シンプルだが便利なヒントを見つけた。
これは、以前 Rich Garzaniti がくれたものだ。

多くのアプリケーションでは、リソースプールを用いる。
例えば、データベースコネクションのコネクションプールなどだ。
チームで開発を行う際、使ったリソースを返却し忘れてしまうと、
よくリソースリークの問題が発生する。

テストのなかでこの問題を避けるには、
リソースプールのサイズを「1」にすることである。
これだと、コードのどこかでリソースを返却し忘れていれば、
そのリソースを使うテストは失敗することになる。
これで余計な手間をかけずに原因の特定が出来る。
