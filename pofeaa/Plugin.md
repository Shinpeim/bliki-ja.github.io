---
layout: pofeaa
title: プラグイン
---

原文: <https://www.martinfowler.com/eaaCatalog/plugin.html>

**by David Rice and Matt Foemmel**

*コンパイル時ではなく、設定時にクラスをリンクする*

解説の全文は『PofEAA』 **499** ページを参照。

![](https://www.martinfowler.com/eaaCatalog/pluginsSketch.gif)

アプリケーションコードがそれぞれで求められる特定の振る舞いについて実装が異なる複数のランタイム環境で動く場合、Separated Interface(476)が利用されることがある。多くの開発者はファクトリメソッドを書くことにより正しい実装を提供する。
ここで、ユニットテスト用には簡単なインメモリカウンタを、しかし製品ではデータベース管理のシーケンスを使えるように、プライマリキージェネレータをSeparated Interfaceを使って定義することを想定しよう。ファクトリメソッドにはおそらく条件文が含まれていて、そこでローカル環境変数を見て、システムがテストモードで動いているかどうかを判断して、正しいキージェネレータを返す。ひとたび2,3のファクトリがあると、あなたの手の上は散らかってしまう。新しいデプロイ設定を確立する (例えば"トランザクション制御なしのインメモリデータベースに対しユニットテストを実行する”とか"DB2データベースに対しフルトランザクション制御ありで製品モードで実行する”) には、いっぱいあるファクトリの条件文を編集して、再ビルドして再配備する必要がある。コンフィグレーションをアプリケーション全体に分散させてはだめだし、再ビルド、再配備を求めてもいけない。pluginはランタイムコンフィグレーションを集中管理することでこの両方の問題を解決する。

(translated by money@andore.com)
